<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- iPhone-optimized viewport settings -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover, shrink-to-fit=no">
    
    <!-- iPhone-specific meta tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Door">
    <meta name="format-detection" content="telephone=no">
    <meta name="mobile-web-app-capable" content="yes">
    
    <!-- Enhanced iPhone touch icon -->
    <link rel="apple-touch-icon" sizes="180x180" href="assets/images/door-icon-180.png">
    <link rel="apple-touch-icon" sizes="152x152" href="assets/images/door-icon-152.png">
    <link rel="apple-touch-icon" sizes="120x120" href="assets/images/door-icon-120.png">
    
    <title>Door</title>
    
    <!-- Preconnect for performance -->
    <link rel="preconnect" href="https://images.unsplash.com">
    <link rel="dns-prefetch" href="https://images.unsplash.com">
    
    <!-- Main Stylesheet -->
    <link rel="stylesheet" href="assets/css/style.css">
    
    <!-- SEO and iPhone-optimized Meta Tags -->
    <meta name="description" content="Door - An intimate dining experience where every meal becomes a memory. Discover our elegant atmosphere and culinary artistry.">
    <meta name="keywords" content="restaurant, fine dining, Door, culinary experience, intimate dining">
    <meta name="author" content="Door">
    
    <!-- iPhone-specific Open Graph tags -->
    <meta property="og:title" content="Door Restaurant">
    <meta property="og:description" content="An intimate dining experience where every meal becomes a memory">
    <meta property="og:image" content="assets/images/door-og-image.jpg">
    <meta property="og:url" content="https://doorrestaurant.com">
    <meta property="og:type" content="restaurant">
    
    <!-- iPhone Twitter Card tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Door Restaurant">
    <meta name="twitter:description" content="An intimate dining experience where every meal becomes a memory">
    <meta name="twitter:image" content="assets/images/door-twitter-card.jpg">
    
    <!-- Enhanced Background Audio for iPhone -->
    <audio id="backgroundAudio" 
           loop 
           preload="auto" 
           autoplay 
           playsinline 
           webkit-playsinline="true"
           x-webkit-airplay="deny">
        <source src="assets/audio/QUIETSTORM.mp3" type="audio/mpeg">
        <source src="assets/audio/QUIETSTORM.ogg" type="audio/ogg">
        <source src="assets/audio/QUIETSTORM.wav" type="audio/wav">
        Your browser does not support the audio element.
    </audio>
</head>
<body>
    <!-- Skip to main content for accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- SIMPLIFIED SPLASH PAGE WITH IMAGE CLICK -->
    <div class="splash-page" id="splashPage" role="banner" aria-label="Welcome to Door">
        <div class="splash-image-container" onclick="enterSite()" role="button" tabindex="0" 
             aria-label="Click to enter Door restaurant" onkeydown="handleSplashKeydown(event)">
            <img src="assets/splash.png" alt="Door Restaurant" class="splash-image" />
            <div class="splash-overlay">
                <div class="click-to-enter">Click to Enter</div>
            </div>
        </div>
        
        <!-- Audio toggle for splash page -->
        <button class="splash-audio-toggle" 
                onclick="toggleAudio(event)" 
                title="Play Background Music" 
                id="splashAudioToggle"
                aria-label="Play background music"
                type="button">♪</button>
    </div>

    <!-- MAIN SITE -->
    <div class="main-site" id="mainSite" role="main">
        <!-- Navigation -->
        <nav class="nav" role="navigation" aria-label="Main navigation">
            <div class="nav-container">
                <a href="index.html" class="nav-logo" aria-label="Door Home">DOOR</a>
                
                <!-- Mobile hamburger menu button -->
                <button class="mobile-menu" 
                        onclick="toggleMobileMenu()" 
                        aria-label="Toggle mobile menu"
                        aria-expanded="false"
                        type="button">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
                
                <!-- Navigation links -->
                <ul class="nav-links" id="navLinks" role="menubar">
                    <li><a href="space.html" role="menuitem">space</a></li>
                    <li><a href="in.the.kitchen.html" role="menuitem">in the kitchen</a></li>
                    <li><a href="at.the.bar.html" role="menuitem">at the bar</a></li>
                    <li><a href="who.was.here.html" role="menuitem">who was here</a></li>
                    <li><a href="what.to.do.html" role="menuitem">what to do</a></li>
                    <li><a href="come.see.us.html" role="menuitem">come see us</a></li>
                    <li><a href="hit.us.up.html" role="menuitem">hit us up</a></li>
                </ul>
                
                <!-- Audio toggle -->
                <div class="nav-left-section">
                    <button class="audio-toggle" 
                            onclick="toggleAudio(event)" 
                            title="Play Background Music"
                            aria-label="Play background music"
                            type="button">♪</button>
                </div>
            </div>
        </nav>

        <!-- Landing Page -->
        <main class="landing-page section active" id="main-content">
            <div class="landing-content">
                <h1 class="embossed-logo" onclick="goHome()" style="cursor: pointer;">DOOR</h1>
                
                <div class="landing-links">
                    <div class="landing-link">
                        <h3>space</h3>
                        <div class="sub-links">
                            <a href="in.the.kitchen.html">in the kitchen</a>
                            <a href="at.the.bar.html">at the bar</a>
                        </div>
                    </div>
                    
                    <div class="landing-link">
                        <h3>what to do</h3>
                        <div class="sub-links">
                            <a href="come.see.us.html">make reservation</a>
                            <a href="what.to.do.html">upcoming events</a>
                        </div>
                    </div>
                    
                    <div class="landing-link">
                        <h3>connect</h3>
                        <div class="sub-links">
                            <a href="who.was.here.html">who was here</a>
                            <a href="come.see.us.html">come see us</a>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Enhanced JavaScript for iPhone -->
    <script src="assets/js/script.js"></script>
    
    <!-- iPhone-specific initialization script -->
    <script>
        // iPhone-specific viewport height handling
        function setIPhoneViewportHeight() {
            const vh = window.innerHeight * 0.01;
            document.documentElement.style.setProperty('--vh', `${vh}px`);
        }
        
        // Enhanced iPhone detection
        function isIPhone() {
            return /iPhone|iPod/.test(navigator.userAgent) || 
                   (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1);
        }
        
        // iPhone-specific optimizations
        if (isIPhone()) {
            document.body.setAttribute('data-device', 'iphone');
            
            // Enhanced viewport handling for iPhone
            setIPhoneViewportHeight();
            window.addEventListener('resize', setIPhoneViewportHeight);
            window.addEventListener('orientationchange', () => {
                setTimeout(setIPhoneViewportHeight, 100);
            });
            
            // iPhone-specific audio handling
            document.addEventListener('DOMContentLoaded', () => {
                const audio = document.getElementById('backgroundAudio');
                if (audio) {
                    audio.setAttribute('webkit-playsinline', 'true');
                    audio.setAttribute('playsinline', 'true');
                    audio.playsInline = true;
                    audio.load();
                }
            });
        }
        
        // Performance monitoring for iPhone
        if ('performance' in window && isIPhone()) {
            window.addEventListener('load', () => {
                const loadTime = Math.round(performance.now());
                console.log(`iPhone optimization - Page loaded in ${loadTime}ms`);
            });
        }
    </script>
</body>
</html>
