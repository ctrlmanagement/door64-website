<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- iPhone-optimized viewport settings -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes, viewport-fit=cover, shrink-to-fit=no">
    
    <!-- iPhone-specific meta tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Door">
    <meta name="format-detection" content="telephone=no">
    <meta name="mobile-web-app-capable" content="yes">
    
    <!-- Enhanced iPhone touch icon -->
    <link rel="apple-touch-icon" sizes="180x180" href="assets/images/door-icon-180.png">
    <link rel="apple-touch-icon" sizes="152x152" href="assets/images/door-icon-152.png">
    <link rel="apple-touch-icon" sizes="120x120" href="assets/images/door-icon-120.png">
    
    <title>Door</title>
    
    <!-- Preconnect for performance -->
    <link rel="preconnect" href="https://images.unsplash.com">
    <link rel="dns-prefetch" href="https://images.unsplash.com">
    
    <!-- Main Stylesheet -->
    <link rel="stylesheet" href="assets/css/style.css">
    
    <!-- Quote Responses Styling - iPhone Enhanced -->
    <style>
        .quote-responses {
            position: fixed !important;
            /* iPhone home indicator positioning */
            bottom: max(40px, calc(env(safe-area-inset-bottom) + 30px)) !important;
            left: max(20px, calc(env(safe-area-inset-left) + 15px)) !important;
            right: max(20px, calc(env(safe-area-inset-right) + 15px)) !important;
            background: #000000 !important;
            color: #ffffff !important;
            padding: 25px !important;
            border-radius: 16px !important;
            border: 2px solid #ffffff !important;
            text-align: center !important;
            font-size: 18px !important;
            line-height: 1.5 !important;
            display: none !important;
            z-index: 99999 !important;
            box-shadow: 0 0 30px rgba(255, 255, 255, 0.3) !important;
            font-family: 'Georgia', serif !important;
            margin: 0 auto !important;
            max-width: 600px !important;
            backdrop-filter: blur(15px) !important;
        }
        
        .quote-responses.show {
            display: block !important;
            animation: quoteFadeIn 0.5s ease-out !important;
        }
        
        @keyframes quoteFadeIn {
            0% {
                opacity: 0;
                transform: translateY(20px) scale(0.9);
            }
            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        .quote-text {
            font-style: italic !important;
            font-weight: normal !important;
            margin: 0 !important;
            padding: 0 !important;
            color: #ffffff !important;
            font-size: 18px !important;
            line-height: 1.5 !important;
        }
    </style>
    
    <!-- Enhanced Background Audio for iPhone -->
    <audio id="backgroundAudio" 
           loop 
           preload="auto" 
           autoplay 
           muted 
           playsinline 
           webkit-playsinline="true"
           x-webkit-airplay="deny">
        <source src="assets/audio/QUIETSTORM.mp3" type="audio/mpeg">
        <source src="assets/audio/QUIETSTORM.ogg" type="audio/ogg">
        <source src="assets/audio/QUIETSTORM.wav" type="audio/wav">
        <!-- Enhanced fallback for iPhone -->
        Your browser does not support the audio element.
    </audio>
    
    <!-- SEO and iPhone-optimized Meta Tags -->
    <meta name="description" content="Door - An intimate dining experience where every meal becomes a memory. Discover our elegant atmosphere and culinary artistry.">
    <meta name="keywords" content="restaurant, fine dining, Door, culinary experience, intimate dining">
    <meta name="author" content="Door">
    
    <!-- iPhone-specific Open Graph tags -->
    <meta property="og:title" content="Door Restaurant">
    <meta property="og:description" content="An intimate dining experience where every meal becomes a memory">
    <meta property="og:image" content="assets/images/door-og-image.jpg">
    <meta property="og:url" content="https://doorrestaurant.com">
    <meta property="og:type" content="restaurant">
    
    <!-- iPhone Twitter Card tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Door Restaurant">
    <meta name="twitter:description" content="An intimate dining experience where every meal becomes a memory">
    <meta name="twitter:image" content="assets/images/door-twitter-card.jpg">
</head>
<body>
    <!-- Skip to main content for accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- SIMPLIFIED SPLASH PAGE WITH IMAGE CLICK -->
    <div class="splash-page" id="splashPage" role="banner" aria-label="Welcome to Door">
        <div class="splash-image-container" onclick="enterSite()" role="button" tabindex="0" 
             aria-label="Click to enter Door restaurant" onkeydown="handleSplashKeydown(event)">
            <img src="assets/images/splash/splash.png" alt="Door Restaurant" class="splash-image" id="splashImage" 
                 onerror="handleImageError(this)" onload="handleImageLoad(this)" />
            <div class="splash-overlay">
                <div class="click-to-enter">Click to Enter</div>
            </div>
            <!-- Debug fallback -->
            <div class="image-debug" id="imageDebug" style="display:none; color:#fff; text-align:center; font-size:18px;">
                Image not found at: assets/splash.png<br>
                <small>Check file path and format</small>
            </div>
        </div>
        
        <!-- Enhanced audio toggle for splash page -->
        <button class="splash-audio-toggle" 
                onclick="toggleAudio(event)" 
                data-mobile-hint="Tap to start music"
                title="Play Background Music" 
                id="splashAudioToggle"
                aria-label="Play background music"
                type="button">♪</button>
    </div>

    <!-- MAIN SITE -->
    <div class="main-site" id="mainSite" role="main">
        <!-- iPhone-Optimized Navigation -->
        <nav class="nav" role="navigation" aria-label="Main navigation">
            <div class="nav-container">
                <a href="index.html" 
                   class="nav-logo" 
                   aria-label="Door Home"
                   role="button">DOOR64</a>
                
                <!-- Enhanced mobile hamburger menu button for iPhone -->
                <button class="mobile-menu" 
                        onclick="toggleMobileMenu()" 
                        aria-label="Toggle mobile menu"
                        aria-expanded="false"
                        aria-controls="navLinks"
                        type="button">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
                
                <!-- Enhanced Navigation links for iPhone -->
                <ul class="nav-links" id="navLinks" role="menubar">
                    <li role="none">
                        <a href="space.html" 
                           role="menuitem" 
                           aria-label="Space section">space</a>
                    </li>
                    <li role="none">
                        <a href="in.the.kitchen.html" 
                           role="menuitem" 
                           aria-label="Kitchen section">in the kitchen</a>
                    </li>
                    <li role="none">
                        <a href="at.the.bar.html" 
                           role="menuitem" 
                           aria-label="Bar section">at the bar</a>
                    </li>
                    <li role="none">
                        <a href="who.was.here.html" 
                           role="menuitem" 
                           aria-label="Guest section">who was here</a>
                    </li>
                    <li role="none">
                        <a href="what.to.do.html" 
                           role="menuitem" 
                           aria-label="Events section">what to do</a>
                    </li>
                    <li role="none">
                        <a href="come.see.us.html" 
                           role="menuitem" 
                           aria-label="Reservations">come see us</a>
                    </li>
                    <li role="none">
                        <a href="hit.us.up.html" 
                           role="menuitem" 
                           aria-label="Contact">hit us up</a>
                    </li>
                </ul>
                
                <!-- Enhanced Audio toggle button for iPhone -->
                <div class="nav-left-section">
                    <button class="audio-toggle" 
                            onclick="toggleAudio(event)" 
                            title="Play Background Music"
                            aria-label="Play background music"
                            type="button">♪</button>
                </div>
            </div>
        </nav>

        <!-- Landing Page -->
        <main class="landing-page section active" id="main-content">
            <div class="gallery-slider" role="presentation" aria-hidden="true"></div>
            
            <div class="landing-content">
                <h1 class="embossed-logo" style="cursor: pointer;">DOOR64</h1>
                
                <div class="landing-links">
                    <div class="landing-link" role="region" aria-label="Space section">
                        <h3>space</h3>
                        <div class="sub-links">
                            <a href="in.the.kitchen.html" 
                               aria-label="Kitchen dining area">in the kitchen</a>
                            <a href="at.the.bar.html" 
                               aria-label="Bar area">at the bar</a>
                        </div>
                    </div>
                    
                    <div class="landing-link" role="region" aria-label="Activities section">
                        <h3>what to do</h3>
                        <div class="sub-links">
                            <a href="come.see.us.html" 
                               aria-label="Make a reservation">make reservation</a>
                            <a href="what.to.do.html" 
                               aria-label="View upcoming events">upcoming events</a>
                        </div>
                    </div>
                    
                    <div class="landing-link" role="region" aria-label="Connect section">
                        <h3>connect</h3>
                        <div class="sub-links">
                            <a href="who.was.here.html" 
                               aria-label="See guest experiences">who was here</a>
                            <a href="come.see.us.html" 
                               aria-label="Visit us">come see us</a>
                        </div>
                    </div>
                </div>

                <!-- Enhanced Landing Gallery for iPhone -->
                <section class="css-gallery" 
                         id="landing-gallery" 
                         role="region" 
                         aria-label="Restaurant showcase gallery"
                         aria-live="polite">
                    <div class="gallery-container">
                        <div class="gallery-track" id="landing-track" role="presentation">
                            <div class="gallery-slide" 
                                 style="background-image: url('https://images.unsplash.com/photo-1414235077428-338989a2e8c0?w=800&h=400&fit=crop&auto=format&q=80')"
                                 role="img"
                                 aria-label="Intimate dining experience">
                                <div class="gallery-content">
                                    <h3>intimate dining experience</h3>
                                    <p>where every meal becomes a memory</p>
                                </div>
                            </div>
                            <div class="gallery-slide" 
                                 style="background-image: url('https://images.unsplash.com/photo-1551024506-0bccd828d307?w=800&h=400&fit=crop&auto=format&q=80')"
                                 role="img"
                                 aria-label="Craft cocktails">
                                <div class="gallery-content">
                                    <h3>craft cocktails</h3>
                                    <p>handcrafted with passion and precision</p>
                                </div>
                            </div>
                            <div class="gallery-slide" 
                                 style="background-image: url('https://images.unsplash.com/photo-1424847651672-bf20a4b0982b?w=800&h=400&fit=crop&auto=format&q=80')"
                                 role="img"
                                 aria-label="Culinary artistry">
                                <div class="gallery-content">
                                    <h3>culinary artistry</h3>
                                    <p>seasonal ingredients, chef's creativity</p>
                                </div>
                            </div>
                            <div class="gallery-slide" 
                                 style="background-image: url('https://images.unsplash.com/photo-1559339352-11d035aa65de?w=800&h=400&fit=crop&auto=format&q=80')"
                                 role="img"
                                 aria-label="Wine selection">
                                <div class="gallery-content">
                                    <h3>wine selection</h3>
                                    <p>curated collection of exceptional wines</p>
                                </div>
                            </div>
                            <div class="gallery-slide" 
                                 style="background-image: url('https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=800&h=400&fit=crop&auto=format&q=80')"
                                 role="img"
                                 aria-label="Elegant atmosphere">
                                <div class="gallery-content">
                                    <h3>elegant atmosphere</h3>
                                    <p>designed for unforgettable experiences</p>
                                </div>
                            </div>
                        </div>
                        
                        <button class="gallery-nav prev" 
                                onclick="previousSlide()" 
                                aria-label="Previous image"
                                title="Previous"
                                type="button">‹</button>
                        <button class="gallery-nav next" 
                                onclick="nextSlide()" 
                                aria-label="Next image"
                                title="Next"
                                type="button">›</button>
                        
                        <div class="gallery-dots" role="tablist" aria-label="Gallery navigation">
                            <button class="gallery-dot active" 
                                    onclick="goToSlide(0)" 
                                    role="tab"
                                    aria-label="Go to slide 1"
                                    aria-selected="true"
                                    tabindex="0"
                                    type="button"></button>
                            <button class="gallery-dot" 
                                    onclick="goToSlide(1)" 
                                    role="tab"
                                    aria-label="Go to slide 2"
                                    aria-selected="false"
                                    tabindex="-1"
                                    type="button"></button>
                            <button class="gallery-dot" 
                                    onclick="goToSlide(2)" 
                                    role="tab"
                                    aria-label="Go to slide 3"
                                    aria-selected="false"
                                    tabindex="-1"
                                    type="button"></button>
                            <button class="gallery-dot" 
                                    onclick="goToSlide(3)" 
                                    role="tab"
                                    aria-label="Go to slide 4"
                                    aria-selected="false"
                                    tabindex="-1"
                                    type="button"></button>
                            <button class="gallery-dot" 
                                    onclick="goToSlide(4)" 
                                    role="tab"
                                    aria-label="Go to slide 5"
                                    aria-selected="false"
                                    tabindex="-1"
                                    type="button"></button>
                        </div>
                        
                        <div class="gallery-progress" 
                             role="progressbar" 
                             aria-label="Gallery progress" 
                             aria-hidden="true"></div>
                    </div>
                </section>
            </div>
        </main>
    </div>
    
    <!-- Quote Responses Section at Bottom (visible on splash page) -->
    <div class="quote-responses" 
         id="quoteResponses" 
         role="status" 
         aria-live="polite" 
         aria-atomic="true">
        <div class="quote-text" id="quoteText"></div>
    </div>

    <!-- Enhanced JavaScript for iPhone -->
    <script src="assets/js/script.js"></script>
    
    <!-- iPhone-specific initialization script -->
    <script>
        // iPhone-specific viewport height handling
        function setIPhoneViewportHeight() {
            const vh = window.innerHeight * 0.01;
            document.documentElement.style.setProperty('--vh', `${vh}px`);
        }
        
        // Enhanced iPhone detection
        function isIPhone() {
            return /iPhone|iPod/.test(navigator.userAgent) || 
                   (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1);
        }
        
        // iPhone-specific optimizations
        if (isIPhone()) {
            document.body.setAttribute('data-device', 'iphone');
            
            // Enhanced viewport handling for iPhone
            setIPhoneViewportHeight();
            window.addEventListener('resize', setIPhoneViewportHeight);
            window.addEventListener('orientationchange', () => {
                setTimeout(setIPhoneViewportHeight, 100);
            });
            
            // iPhone-specific audio handling
            document.addEventListener('DOMContentLoaded', () => {
                const audio = document.getElementById('backgroundAudio');
                if (audio) {
                    // Enhanced iPhone audio attributes
                    audio.setAttribute('webkit-playsinline', 'true');
                    audio.setAttribute('playsinline', 'true');
                    audio.playsInline = true;
                    audio.load();
                }
            });
        }
        
        // Performance monitoring for iPhone
        if ('performance' in window && isIPhone()) {
            window.addEventListener('load', () => {
                const loadTime = Math.round(performance.now());
                console.log(`iPhone optimization - Page loaded in ${loadTime}ms`);
            });
        }

        // =============== SIMPLIFIED SPLASH FUNCTIONS ===============
        function enterSite() {
            console.log('Entering site...');
            hideSplash();
        }

        function handleSplashKeydown(event) {
            if (event.key === 'Enter' || event.key === ' ') {
                event.preventDefault();
                enterSite();
            }
        }

        function hideSplash() {
            const splashPage = document.getElementById('splashPage');
            const mainSite = document.getElementById('mainSite');
            
            if (splashPage && mainSite) {
                splashPage.classList.add('hidden');
                mainSite.classList.add('active');
                
                setTimeout(() => {
                    splashPage.style.display = 'none';
                }, 1200);
                
                console.log('Splash hidden, main site active');
            }
        }
    </script>
</body>
</html>
